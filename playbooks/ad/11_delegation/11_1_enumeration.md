## Delegation Enumeration [t-ad-delegation-delegation_enumeration]

### 1.1.1 Find computers with enabled “TrustedForDelegation” flag (Unconstrained Delegation)




**option 1: Powershell**

{% code overflow="wrap" %}
```bash
Get-ADObject -ldapfilter "(userAccountControl:1.2.840.113556.1.4.803:=524288)"
```
{% endcode %}


**option 2: Powerview**

{% code overflow="wrap" %}
```bash
#For hosts:
Get-DomainComputer -Unconstrained | select samaccountname

#For accounts:
Get-DomainUser -ldapfilter "(userAccountControl:1.2.840.113556.1.4.803:=524288)"

```
{% endcode %}


**option 3: impacket**

{% code overflow="wrap" %}
```bash
impacket-findDelegation hpbank.local/user

```
{% endcode %}

### 1.1.2 Find computers with enabled “msDS-AllowedToDelegateTo” attribute (Constrained Delegation, any authentication protocol)




**option 1: Powerview**

{% code overflow="wrap" %}
```bash
Get-DomainUser -TrustedToAuth
Get-NetComputer -TrustedToAuth -Properties samaccountname,msds-alloweddelegateto,useaccountcontrol | format-table -wrap

```
{% endcode %}


**option 2: impacket**

{% code overflow="wrap" %}
```bash
impacket-findDelegation hpbank.local/user

```
{% endcode %}


**option 3: ADSearch.exe**

{% code overflow="wrap" %}
```bash
ADSearch.exe --search "(&(objectCategory=computer)(msds-allowedtodelegateto=*))" --attributes dnshostname,samaccountname,msds-allowedtodelegateto --json
ADSearch.exe --search "(&(objectCategory=user)(msds-allowedtodelegateto=*))" --attributes samaccountname,msds-allowedtodelegateto --json

```
{% endcode %}

