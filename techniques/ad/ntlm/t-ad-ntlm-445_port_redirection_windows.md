# Configure traffic redirection from port 445 (SMB) on Windows

## Configure traffic redirection from port 445 (SMB) on Windows [t-ad-ntlm-445_port_redirection_windows]

How to configure traffic redirection from port 445 (SMB) on Windows. Admin privileges are required.

### 1.1 Cofigure to relay connections to a different port on the same interface




**option 1: tcpleay.py**

{% code overflow="wrap" %}
```bash
python tcprelay.py --src-port 445 --dst-port 8445
```
{% endcode %}


**option 2: StreamDivert**

{% code overflow="wrap" %}
```bash
create a config file: config.txt
tcp < 445 0.0.0.0 -> 10.10.10.101 8445

StreamDivert.exe config_file.txt -v

```
{% endcode %}


**option 3: PortBender (CobaltStrike)**

{% code overflow="wrap" %}
```bash
cd C:\Windows\system32\drivers
upload C:\Tools\PortBender\WinDivert64.sys
PortBender redirect 445 8445

```
{% endcode %}

### 1.2 Relay connections from the local interface to somewhere else (optional, for some tools)




**option 1: socat**

{% code overflow="wrap" %}
```bash
socat.exe TCP-LISTEN:8445,fork,reuseaddr TCP:192.168.0.200:445
```
{% endcode %}


**option 2: CobaltStrike**

{% code overflow="wrap" %}
```bash
rportfwd 8445 localhost 445
```
{% endcode %}

